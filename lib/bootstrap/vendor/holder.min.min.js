/*!

Holder - client side image placeholders
Version 2.9.4+cabil
© 2016 Ivan Malopinsky - http://imsky.co

Site:     http://holderjs.com
Issues:   https://github.com/imsky/holder/issues
License:  MIT

*/
;!function(b){if(b.document){var a=b.document;a.querySelectorAll||(a.querySelectorAll=function(f){var d,c=a.createElement("style"),e=[];for(a.documentElement.firstChild.appendChild(c),a._qsa=[],c.styleSheet.cssText=f+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",b.scrollBy(0,0),c.parentNode.removeChild(c);a._qsa.length;){d=a._qsa.shift(),d.style.removeAttribute("x-qsa"),e.push(d)}return a._qsa=null,e}),a.querySelector||(a.querySelector=function(c){var d=a.querySelectorAll(c);return d.length?d[0]:null}),a.getElementsByClassName||(a.getElementsByClassName=function(c){return c=String(c).replace(/^|\s+/g,"."),a.querySelectorAll(c)}),Object.keys||(Object.keys=function(d){if(d!==Object(d)){throw TypeError("Object.keys called on non-object")}var c,f=[];for(c in d){Object.prototype.hasOwnProperty.call(d,c)&&f.push(c)}return f}),Array.prototype.forEach||(Array.prototype.forEach=function(g){if(void 0===this||null===this){throw TypeError()}var d=Object(this),h=d.length>>>0;if("function"!=typeof g){throw TypeError()}var f,c=arguments[1];for(f=0;f<h;f++){f in d&&g.call(c,d[f],f,d)}}),function(d){var c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";d.atob=d.atob||function(j){j=String(j);var l,h=0,g=[],k=0,f=0;if(j=j.replace(/\s/g,""),j.length%4===0&&(j=j.replace(/=+$/,"")),j.length%4===1){throw Error("InvalidCharacterError")}if(/[^+\/0-9A-Za-z]/.test(j)){throw Error("InvalidCharacterError")}for(;h<j.length;){l=c.indexOf(j.charAt(h)),k=k<<6|l,f+=6,24===f&&(g.push(String.fromCharCode(k>>16&255)),g.push(String.fromCharCode(k>>8&255)),g.push(String.fromCharCode(255&k)),f=0,k=0),h+=1}return 12===f?(k>>=4,g.push(String.fromCharCode(255&k))):18===f&&(k>>=2,g.push(String.fromCharCode(k>>8&255)),g.push(String.fromCharCode(255&k))),g.join("")},d.btoa=d.btoa||function(q){q=String(q);var j,f,m,g,t,w,k,p=0,v=[];if(/[^\x00-\xFF]/.test(q)){throw Error("InvalidCharacterError")}for(;p<q.length;){j=q.charCodeAt(p++),f=q.charCodeAt(p++),m=q.charCodeAt(p++),g=j>>2,t=(3&j)<<4|f>>4,w=(15&f)<<2|m>>6,k=63&m,p===q.length+2?(w=64,k=64):p===q.length+1&&(k=64),v.push(c.charAt(g),c.charAt(t),c.charAt(w),c.charAt(k))}return v.join("")}}(b),Object.prototype.hasOwnProperty||(Object.prototype.hasOwnProperty=function(d){var c=this.__proto__||this.constructor.prototype;return d in this&&(!(d in c)||c[d]!==this[d])}),function(){if("performance" in b==!1&&(b.performance={}),Date.now=Date.now||function(){return(new Date).getTime()},"now" in b.performance==!1){var c=Date.now();performance.timing&&performance.timing.navigationStart&&(c=performance.timing.navigationStart),b.performance.now=function(){return Date.now()-c}}}(),b.requestAnimationFrame||(b.webkitRequestAnimationFrame&&b.webkitCancelAnimationFrame?!function(c){c.requestAnimationFrame=function(d){return webkitRequestAnimationFrame(function(){d(c.performance.now())})},c.cancelAnimationFrame=c.webkitCancelAnimationFrame}(b):b.mozRequestAnimationFrame&&b.mozCancelAnimationFrame?!function(c){c.requestAnimationFrame=function(d){return mozRequestAnimationFrame(function(){d(c.performance.now())})},c.cancelAnimationFrame=c.mozCancelAnimationFrame}(b):!function(c){c.requestAnimationFrame=function(d){return c.setTimeout(d,1000/60)},c.cancelAnimationFrame=c.clearTimeout}(b))}}(this),function(b,a){"object"==typeof exports&&"object"==typeof module?module.exports=a():"function"==typeof define&&define.amd?define([],a):"object"==typeof exports?exports.Holder=a():b.Holder=a()}(this,function(){return function(b){function a(e){if(c[e]){return c[e].exports}var d=c[e]={exports:{},id:e,loaded:!1};return b[e].call(d.exports,d,d.exports,a),d.loaded=!0,d.exports}var c={};return a.m=b,a.c=c,a.p="",a(0)}([function(b,a,c){b.exports=c(1)},function(b,a,c){(function(N){function U(h,f,i,g){var d=ac(i.substr(i.lastIndexOf(h.domain)),h);d&&X({mode:null,el:g,flags:d,engineSettings:f})}function ac(p,y){var g={theme:aa(q.settings.themes.gray,null),stylesheets:y.stylesheets,instanceOptions:y},d=p.indexOf("?"),k=[p];d!==-1&&(k=[p.slice(0,d),p.slice(d+1)]);var f=k[0].split("/");g.holderURL=p;var w=f[1],z=w.match(/([\d]+p?)x([\d]+p?)/);if(!z){return !1}if(g.fluid=w.indexOf("p")!==-1,g.dimensions={width:z[1].replace("p","%"),height:z[2].replace("p","%")},2===k.length){var j=J.parse(k[1]);if(I.truthy(j.ratio)){g.fluid=!0;var m=parseFloat(g.dimensions.width.replace("%","")),x=parseFloat(g.dimensions.height.replace("%",""));x=Math.floor(100*(x/m)),m=100,g.dimensions.width=m+"%",g.dimensions.height=x+"%"}if(g.auto=I.truthy(j.auto),j.bg&&(g.theme.bg=I.parseColor(j.bg)),j.fg&&(g.theme.fg=I.parseColor(j.fg)),j.bg&&!j.fg&&(g.autoFg=!0),j.theme&&g.instanceOptions.themes.hasOwnProperty(j.theme)&&(g.theme=aa(g.instanceOptions.themes[j.theme],null)),j.text&&(g.text=j.text),j.textmode&&(g.textmode=j.textmode),j.size&&(g.size=j.size),j.font&&(g.font=j.font),j.align&&(g.align=j.align),j.lineWrap&&(g.lineWrap=j.lineWrap),g.nowrap=I.truthy(j.nowrap),g.outline=I.truthy(j.outline),I.truthy(j.random)){q.vars.cache.themeKeys=q.vars.cache.themeKeys||Object.keys(g.instanceOptions.themes);var v=q.vars.cache.themeKeys[0|Math.random()*q.vars.cache.themeKeys.length];g.theme=aa(g.instanceOptions.themes[v],null)}}return g}function X(D){var ak=D.mode,u=D.el,h=D.flags,z=D.engineSettings,k=h.dimensions,al=h.theme,x=k.width+"x"+k.height;ak=null==ak?h.fluid?"fluid":"image":ak;var F=/holder_([a-z]+)/g,E=!1;if(null!=h.text&&(al.text=h.text,"object"===u.nodeName.toLowerCase())){for(var C=al.text.split("\\n"),j=0;j<C.length;j++){C[j]=I.encodeHtmlEntity(C[j])}al.text=C.join("\\n")}if(al.text){var A=al.text.match(F);null!==A&&A.forEach(function(d){"holder_dimensions"===d&&(al.text=al.text.replace(d,x))})}var w=h.holderURL,T=aa(z,null);if(h.font&&(al.font=h.font,!T.noFontFallback&&"img"===u.nodeName.toLowerCase()&&q.setup.supportsCanvas&&"svg"===T.renderer&&(T=aa(T,{renderer:"canvas"}))),h.font&&"canvas"==T.renderer&&(T.reRender=!0),"background"==ak){null==u.getAttribute("data-background-src")&&H.setAttr(u,{"data-background-src":w})}else{var S={};S[q.vars.dataAttr]=w,H.setAttr(u,S)}h.theme=al,u.holderData={flags:h,engineSettings:T},"image"!=ak&&"fluid"!=ak||H.setAttr(u,{alt:al.text?E?al.text:al.text+" ["+x+"]":x});var O={mode:ak,el:u,holderSettings:{dimensions:k,theme:al,flags:h},engineSettings:T};"image"==ak?(h.auto||(u.style.width=k.width+"px",u.style.height=k.height+"px"),"html"==T.renderer?u.style.backgroundColor=al.bg:(aj(O),"exact"==h.textmode&&(u.holderData.resizeUpdate=!0,q.vars.resizableImages.push(u),ad(u)))):"background"==ak&&"html"!=T.renderer?aj(O):"fluid"==ak&&(u.holderData.resizeUpdate=!0,"%"==k.height.slice(-1)?u.style.height=k.height:null!=h.auto&&h.auto||(u.style.height=k.height+"px"),"%"==k.width.slice(-1)?u.style.width=k.width:null!=h.auto&&h.auto||(u.style.width=k.width+"px"),"inline"!=u.style.display&&""!==u.style.display&&"none"!=u.style.display||(u.style.display="block"),L(u),"html"==T.renderer?u.style.backgroundColor=al.bg:(q.vars.resizableImages.push(u),ad(u)))}function aj(p){function g(){var h=null;switch(j.renderer){case"canvas":h=M(t,p);break;case"svg":h=R(t,p);break;default:throw"Holder: invalid renderer: "+j.renderer}return h}var d=null,k=p.mode,f=p.el,s=p.holderSettings,j=p.engineSettings;switch(j.renderer){case"svg":if(!q.setup.supportsSVG){return}break;case"canvas":if(!q.setup.supportsCanvas){return}break;default:return}var m={width:s.dimensions.width,height:s.dimensions.height,theme:s.theme,flags:s.flags},t=Q(m);if(d=g(),null==d){throw"Holder: couldn't render placeholder"}"background"==k?(f.style.backgroundImage="url("+d+")",j.noBackgroundSize||(f.style.backgroundSize=m.width+"px "+m.height+"px")):("img"===f.nodeName.toLowerCase()?H.setAttr(f,{src:d}):"object"===f.nodeName.toLowerCase()&&H.setAttr(f,{data:d,type:"image/svg+xml"}),j.reRender&&N.setTimeout(function(){var h=g();if(null==h){throw"Holder: couldn't render placeholder"}"img"===f.nodeName.toLowerCase()?H.setAttr(f,{src:h}):"object"===f.nodeName.toLowerCase()&&H.setAttr(f,{data:h,type:"image/svg+xml"})},150)),H.setAttr(f,{"data-holder-rendered":!0})}function Q(ax){function O(g,d,h,f){d.width=h,d.height=f,g.width=Math.max(g.width,d.width),g.height+=d.height}var ap=q.defaults.size;switch(parseFloat(ax.theme.size)?ap=ax.theme.size:parseFloat(ax.flags.size)&&(ap=ax.flags.size),ax.font={family:ax.theme.font?ax.theme.font:"Arial, Helvetica, Open Sans, sans-serif",size:Z(ax.width,ax.height,ap,q.defaults.scale),units:ax.theme.units?ax.theme.units:q.defaults.units,weight:ax.theme.fontweight?ax.theme.fontweight:"bold"},ax.text=ax.theme.text||Math.floor(ax.width)+"x"+Math.floor(ax.height),ax.noWrap=ax.theme.nowrap||ax.flags.nowrap,ax.align=ax.theme.align||ax.flags.align||"center",ax.flags.textmode){case"literal":ax.text=ax.flags.dimensions.width+"x"+ax.flags.dimensions.height;break;case"exact":if(!ax.flags.exactDimensions){break}ax.text=Math.floor(ax.flags.exactDimensions.width)+"x"+Math.floor(ax.flags.exactDimensions.height)}var al=ax.flags.lineWrap||q.setup.lineWrapRatio,at=ax.width*al,ao=at,aB=new G({width:ax.width,height:ax.height}),S=aB.Shape,au=new S.Rect("holderBg",{fill:ax.theme.bg});if(au.resize(ax.width,ax.height),aB.root.add(au),ax.flags.outline){var D=new n(au.properties.fill);D=D.lighten(D.lighterThan("7f7f7f")?-0.1:0.1),au.properties.outline={fill:D.toHex(!0),width:2}}var az=ax.theme.fg;if(ax.flags.autoFg){var ay=new n(au.properties.fill),aw=new n("fff"),an=new n("000",{alpha:0.285714});az=ay.blendAlpha(ay.lighterThan("7f7f7f")?an:aw).toHex(!0)}var av=new S.Group("holderTextGroup",{text:ax.text,align:ax.align,font:ax.font,fill:az});av.moveTo(null,null,1),aB.root.add(av);var aq=av.textPositionData=B(aB);if(!aq){throw"Holder: staging fallback not supported yet."}av.properties.leading=aq.boundingBox.height;var z=null,y=null;if(aq.lineCount>1){var aA,l=0,am=0,ak=0;y=new S.Group("line"+ak),"left"!==ax.align&&"right"!==ax.align||(ao=ax.width*(1-2*(1-al)));for(var F=0;F<aq.words.length;F++){var ar=aq.words[F];z=new S.Text(ar.text);var j="\\n"==ar.text;!ax.noWrap&&(l+ar.width>=ao||j===!0)&&(O(av,y,l,av.properties.leading),av.add(y),l=0,am+=av.properties.leading,ak+=1,y=new S.Group("line"+ak),y.y=am),j!==!0&&(z.moveTo(l,0),l+=aq.spaceWidth+ar.width,y.add(z))}if(O(av,y,l,av.properties.leading),av.add(y),"left"===ax.align){av.moveTo(ax.width-at,null,null)}else{if("right"===ax.align){for(aA in av.children){y=av.children[aA],y.moveTo(ax.width-y.width,null,null)}av.moveTo(0-(ax.width-at),null,null)}else{for(aA in av.children){y=av.children[aA],y.moveTo((av.width-y.width)/2,null,null)}av.moveTo((ax.width-av.width)/2,null,null)}}av.moveTo(null,(ax.height-av.height)/2,null),(ax.height-av.height)/2<0&&av.moveTo(null,0,null)}else{z=new S.Text(ax.text),y=new S.Group("line0"),y.add(z),av.add(y),"left"===ax.align?av.moveTo(ax.width-at,null,null):"right"===ax.align?av.moveTo(0-(ax.width-at),null,null):av.moveTo((ax.width-aq.boundingBox.width)/2,null,null),av.moveTo(null,(ax.height-aq.boundingBox.height)/2,null)}return aB}function Z(k,p,g,d){var j=parseInt(k,10),f=parseInt(p,10),m=Math.max(j,f),u=Math.min(j,f),h=0.8*Math.min(u,m*d);return Math.round(Math.max(g,h))}function ad(p){var u;u=null==p||null==p.nodeType?q.vars.resizableImages:[p];for(var g=0,d=u.length;g<d;g++){var k=u[g];if(k.holderData){var f=k.holderData.flags,v=e(k);if(v){if(!k.holderData.resizeUpdate){continue}if(f.fluid&&f.auto){var j=k.holderData.fluidConfig;switch(j.mode){case"width":v.height=v.width/j.ratio;break;case"height":v.width=v.height*j.ratio}}var m={mode:"image",holderSettings:{dimensions:v,theme:f.theme,flags:f},el:k,engineSettings:k.holderData.engineSettings};"exact"==f.textmode&&(f.exactDimensions=v,m.holderSettings.dimensions=f.dimensions),aj(m)}else{af(k)}}}}function L(g){if(g.holderData){var d=e(g);if(d){var h=g.holderData.flags,f={fluidHeight:"%"==h.dimensions.height.slice(-1),fluidWidth:"%"==h.dimensions.width.slice(-1),mode:null,initialDimensions:d};f.fluidWidth&&!f.fluidHeight?(f.mode="width",f.ratio=f.initialDimensions.width/parseFloat(h.dimensions.height)):!f.fluidWidth&&f.fluidHeight&&(f.mode="height",f.ratio=parseFloat(h.dimensions.width)/f.initialDimensions.height),g.holderData.fluidConfig=f}else{af(g)}}}function ah(){var f,g=[],d=Object.keys(q.vars.invisibleImages);d.forEach(function(h){f=q.vars.invisibleImages[h],e(f)&&"img"==f.nodeName.toLowerCase()&&(g.push(f),delete q.vars.invisibleImages[h])}),g.length&&K.run({images:g}),setTimeout(function(){N.requestAnimationFrame(ah)},10)}function ag(){q.vars.visibilityCheckStarted||(N.requestAnimationFrame(ah),q.vars.visibilityCheckStarted=!0)}function af(d){d.holderData.invisibleId||(q.vars.invisibleId+=1,q.vars.invisibleImages["i"+q.vars.invisibleId]=d,d.holderData.invisibleId=q.vars.invisibleId)}function W(d){q.vars.debounceTimer||d.call(this),q.vars.debounceTimer&&N.clearTimeout(q.vars.debounceTimer),q.vars.debounceTimer=N.setTimeout(function(){q.vars.debounceTimer=null,d.call(this)},q.setup.debounce)}function ae(){W(function(){ad(null)})}var Y=c(2),J=c(3),G=c(6),I=c(7),ai=c(8),H=c(9),n=c(10),V=c(11),R=c(12),M=c(15),aa=I.extend,e=I.dimensionCheck,ab=V.svg_ns,K={version:V.version,addTheme:function(f,d){return null!=f&&null!=d&&(q.settings.themes[f]=d),delete q.vars.cache.themeKeys,this},addImage:function(f,d){var g=H.getNodeArray(d);return g.forEach(function(h){var j=H.newEl("img"),i={};i[q.setup.dataAttr]=f,H.setAttr(j,i),h.appendChild(j)}),this},setResizeUpdate:function(f,d){f.holderData&&(f.holderData.resizeUpdate=!!d,f.holderData.resizeUpdate&&ad(f))},run:function(k){k=k||{};var m={},f=aa(q.settings,k);q.vars.preempted=!0,q.vars.dataAttr=f.dataAttr||q.setup.dataAttr,m.renderer=f.renderer?f.renderer:q.setup.renderer,q.setup.renderers.join(",").indexOf(m.renderer)===-1&&(m.renderer=q.setup.supportsSVG?"svg":q.setup.supportsCanvas?"canvas":"html");var j=H.getNodeArray(f.images),d=H.getNodeArray(f.bgnodes),i=H.getNodeArray(f.stylenodes),g=H.getNodeArray(f.objects);return m.stylesheets=[],m.svgXMLStylesheet=!0,m.noFontFallback=!!f.noFontFallback,m.noBackgroundSize=!!f.noBackgroundSize,i.forEach(function(p){if(p.attributes.rel&&p.attributes.href&&"stylesheet"==p.attributes.rel.value){var l=p.attributes.href.value,o=H.newEl("a");o.href=l;var h=o.protocol+"//"+o.host+o.pathname+o.search;m.stylesheets.push(h)}}),d.forEach(function(w){if(N.getComputedStyle){var o=N.getComputedStyle(w,null).getPropertyValue("background-image"),A=w.getAttribute("data-background-src"),p=A||o,t=null,z=f.domain+"/",y=p.indexOf(z);if(0===y){t=p}else{if(1===y&&"?"===p[0]){t=p.slice(1)}else{var x=p.substr(y).match(/([^\"]*)"?\)/);if(null!==x){t=x[1]}else{if(0===p.indexOf("url(")){throw"Holder: unable to parse background URL: "+p}}}}if(t){var v=ac(t,f);v&&X({mode:"background",el:w,flags:v,engineSettings:m})}}}),g.forEach(function(r){var l={};try{l.data=r.getAttribute("data"),l.dataSrc=r.getAttribute(q.vars.dataAttr)}catch(h){}var u=null!=l.data&&0===l.data.indexOf(f.domain),p=null!=l.dataSrc&&0===l.dataSrc.indexOf(f.domain);u?U(f,m,l.data,r):p&&U(f,m,l.dataSrc,r)}),j.forEach(function(v){var r={};try{r.src=v.getAttribute("src"),r.dataSrc=v.getAttribute(q.vars.dataAttr),r.rendered=v.getAttribute("data-holder-rendered")}catch(p){}var w=null!=r.src,u=null!=r.dataSrc&&0===r.dataSrc.indexOf(f.domain),h=null!=r.rendered&&"true"==r.rendered;w?0===r.src.indexOf(f.domain)?U(f,m,r.src,v):u&&(h?U(f,m,r.dataSrc,v):!function(x,s,z,l,y){I.imageExists(x,function(o){o||U(s,z,l,y)})}(r.src,f,m,r.dataSrc,v)):u&&U(f,m,r.dataSrc,v)}),this}},q={settings:{domain:"holder.js",images:"img",objects:"object",bgnodes:"body .holderjs",stylenodes:"head link.holderjs",themes:{gray:{bg:"#EEEEEE",fg:"#AAAAAA"},social:{bg:"#3a5a97",fg:"#FFFFFF"},industrial:{bg:"#434A52",fg:"#C2F200"},sky:{bg:"#0D8FDB",fg:"#FFFFFF"},vine:{bg:"#39DBAC",fg:"#1E292C"},lava:{bg:"#F8591A",fg:"#1C2846"}}},defaults:{size:10,units:"pt",scale:1/16}},B=function(){var f=null,d=null,g=null;return function(j){var z=j.root;if(q.setup.supportsSVG){var t=!1,S=function(h){return document.createTextNode(h)};null!=f&&f.parentNode===document.body||(t=!0),f=ai.initSVG(f,z.properties.width,z.properties.height),f.style.display="block",t&&(d=H.newEl("text",ab),g=S(null),H.setAttr(d,{x:0}),d.appendChild(g),f.appendChild(d),document.body.appendChild(f),f.style.visibility="hidden",f.style.position="absolute",f.style.top="-100%",f.style.left="-100%");var al=z.children.holderTextGroup,x=al.properties;H.setAttr(d,{y:x.font.size,style:I.cssProps({"font-weight":x.font.weight,"font-size":x.font.size+x.font.units,"font-family":x.font.family})}),g.nodeValue=x.text;var A=d.getBBox(),ak=Math.ceil(A.width/z.properties.width),F=x.text.split(" "),E=x.text.match(/\\n/g);ak+=null==E?0:E.length,g.nodeValue=x.text.replace(/[ ]+/g,"");var D=d.getComputedTextLength(),k=A.width-D,C=Math.round(k/Math.max(1,F.length-1)),w=[];if(ak>1){g.nodeValue="";for(var T=0;T<F.length;T++){if(0!==F[T].length){g.nodeValue=I.decodeHtmlEntity(F[T]);var O=d.getBBox();w.push({text:F[T],width:O.width})}}}return f.style.display="none",{spaceWidth:C,lineCount:ak,boundingBox:A,words:w}}return !1}}();for(var P in q.flags){q.flags.hasOwnProperty(P)&&(q.flags[P].match=function(d){return d.match(this.regex)})}q.setup={renderer:"html",debounce:100,ratio:1,supportsCanvas:!1,supportsSVG:!1,lineWrapRatio:0.9,dataAttr:"data-src",renderers:["html","canvas","svg"]},q.vars={preempted:!1,resizableImages:[],invisibleImages:{},invisibleId:0,visibilityCheckStarted:!1,debounceTimer:null,cache:{}},function(){var d=H.newEl("canvas");d.getContext&&d.toDataURL("image/png").indexOf("data:image/png")!=-1&&(q.setup.renderer="canvas",q.setup.supportsCanvas=!0),document.createElementNS&&document.createElementNS(ab,"svg").createSVGRect&&(q.setup.renderer="svg",q.setup.supportsSVG=!0)}(),ag(),Y&&Y(function(){q.vars.preempted||K.run(),N.addEventListener?(N.addEventListener("resize",ae,!1),N.addEventListener("orientationchange",ae,!1)):N.attachEvent("onresize",ae),"object"==typeof N.Turbolinks&&N.document.addEventListener("page:change",function(){K.run()})}),b.exports=K}).call(a,function(){return this}())},function(b,a){function c(V){function G(d){if(!q){if(!Z.body){return Q(G)}for(q=!0;d=j.shift();){Q(d)}}}function N(d){(z||d.type===P||Z[W]===X)&&(J(),G())}function J(){z?(Z[k](O,N,R),V[k](P,N,R)):(Z[L](B,N),V[L](D,N))}function Q(f,d){setTimeout(f,+d>=0?d:1)}function M(d){q?Q(d):j.push(d)}null==document.readyState&&document.addEventListener&&(document.addEventListener("DOMContentLoaded",function I(){document.removeEventListener("DOMContentLoaded",I,!1),document.readyState="complete"},!1),document.readyState="loading");var Z=V.document,H=Z.documentElement,P="load",R=!1,D="on"+P,X="complete",W="readyState",U="attachEvent",L="detachEvent",T="addEventListener",O="DOMContentLoaded",B="onreadystatechange",k="removeEventListener",z=T in Z,Y=R,q=R,j=[];if(Z[W]===X){Q(G)}else{if(z){Z[T](O,N,R),V[T](P,N,R)}else{Z[U](B,N),V[U](D,N);try{Y=null==V.frameElement&&H}catch(K){}Y&&Y.doScroll&&!function F(){if(!q){try{Y.doScroll("left")}catch(d){return Q(F,50)}J(),G()}}()}}return M.version="1.4.0",M.isReady=function(){return q},M}b.exports="undefined"!=typeof window&&c(window)},function(h,k,d){var b=encodeURIComponent,g=decodeURIComponent,c=d(4),j=d(5),m=/(\w+)\[(\d+)\]/,f=/\w+\.\w+/;k.parse=function(p){if("string"!=typeof p){return{}}if(p=c(p),""===p){return{}}"?"===p.charAt(0)&&(p=p.slice(1));for(var x={},l=p.split("&"),i=0;i<l.length;i++){var v,o,w,s=l[i].split("="),q=g(s[0]);if(v=m.exec(q)){x[v[1]]=x[v[1]]||[],x[v[1]][v[2]]=g(s[1])}else{if(v=f.test(q)){for(v=q.split("."),o=x;v.length;){if(w=v.shift(),w.length){if(o[w]){if(o[w]&&"object"!=typeof o[w]){break}}else{o[w]={}}v.length||(o[w]=g(s[1])),o=o[w]}}}else{x[s[0]]=null==s[1]?"":g(s[1])}}}return x},k.stringify=function(p){if(!p){return""}var l=[];for(var r in p){var a=p[r];if("array"!=j(a)){l.push(b(r)+"="+b(p[r]))}else{for(var q=0;q<a.length;++q){l.push(b(r+"["+q+"]")+"="+b(a[q]))}}}return l.join("&")}},function(b,a){function c(d){return d.replace(/^\s*|\s*$/g,"")}a=b.exports=c,a.left=function(d){return d.replace(/^\s*/,"")},a.right=function(d){return d.replace(/\s*$/,"")}},function(c,a){function d(f){return !(null==f||!(f._isBuffer||f.constructor&&"function"==typeof f.constructor.isBuffer&&f.constructor.isBuffer(f)))}var b=Object.prototype.toString;c.exports=function(f){switch(b.call(f)){case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object Error]":return"error"}return null===f?"null":void 0===f?"undefined":f!==f?"nan":f&&1===f.nodeType?"element":d(f)?"buffer":(f=f.valueOf?f.valueOf():Object.prototype.valueOf.apply(f),typeof f)}},function(b,a){var c=function(p){function u(i,h){for(var l in h){i[l]=h[l]}return i}var g=1,d=function(h){g++,this.parent=null,this.children={},this.id=g,this.name="n"+g,"undefined"!=typeof h&&(this.name=h),this.x=this.y=this.z=0,this.width=this.height=0};d.prototype.resize=function(i,h){null!=i&&(this.width=i),null!=h&&(this.height=h)},d.prototype.moveTo=function(i,h,l){this.x=null!=i?i:this.x,this.y=null!=h?h:this.y,this.z=null!=l?l:this.z},d.prototype.add=function(i){var h=i.name;if("undefined"!=typeof this.children[h]){throw"SceneGraph: child already exists: "+h}this.children[h]=i,i.parent=this};var k=function(){d.call(this,"root"),this.properties=p};k.prototype=new d;var f=function(h,i){if(d.call(this,h),this.properties={fill:"#000000"},"undefined"!=typeof i){u(this.properties,i)}else{if("undefined"!=typeof h&&"string"!=typeof h){throw"SceneGraph: invalid node name"}}};f.prototype=new d;var q=function(){f.apply(this,arguments),this.type="group"};q.prototype=new f;var v=function(){f.apply(this,arguments),this.type="rect"};v.prototype=new f;var j=function(h){f.call(this),this.type="text",this.properties.text=h};j.prototype=new f;var m=new k;return this.Shape={Rect:v,Text:j,Group:q},this.root=m,this};b.exports=c},function(b,a){(function(c){a.extend=function(h,f){var j={};for(var g in h){h.hasOwnProperty(g)&&(j[g]=h[g])}if(null!=f){for(var d in f){f.hasOwnProperty(d)&&(j[d]=f[d])}}return j},a.cssProps=function(f){var d=[];for(var g in f){f.hasOwnProperty(g)&&d.push(g+":"+f[g])}return d.join(";")},a.encodeHtmlEntity=function(g){for(var d=[],h=0,f=g.length-1;f>=0;f--){h=g.charCodeAt(f),h>128?d.unshift(["&#",h,";"].join("")):d.unshift(g[f])}return d.join("")},a.imageExists=function(f,d){var g=new Image;g.onerror=function(){d.call(this,!1)},g.onload=function(){d.call(this,!0)},g.src=f},a.decodeHtmlEntity=function(d){return d.replace(/&#(\d+);/g,function(g,f){return String.fromCharCode(f)})},a.dimensionCheck=function(f){var d={height:f.clientHeight,width:f.clientWidth};return !(!d.height||!d.width)&&d},a.truthy=function(d){return"string"==typeof d?"true"===d||"yes"===d||"1"===d||"on"===d||"✓"===d:!!d},a.parseColor=function(h){var f,k=/(^(?:#?)[0-9a-f]{6}$)|(^(?:#?)[0-9a-f]{3}$)/i,g=/^rgb\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/,d=/^rgba\((\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(0\.\d{1,}|1)\)$/,j=h.match(k);return null!==j?(f=j[1]||j[2],"#"!==f[0]?"#"+f:f):(j=h.match(g),null!==j?f="rgb("+j.slice(1).join(",")+")":(j=h.match(d),null!==j?f="rgba("+j.slice(1).join(",")+")":null))},a.canvasRatio=function(){var e=1,g=1;if(c.document){var f=c.document.createElement("canvas");if(f.getContext){var d=f.getContext("2d");e=c.devicePixelRatio||1,g=d.webkitBackingStorePixelRatio||d.mozBackingStorePixelRatio||d.msBackingStorePixelRatio||d.oBackingStorePixelRatio||d.backingStorePixelRatio||1}}return e/g}}).call(a,function(){return this}())},function(b,a,c){(function(g){var f=c(9),d="http://www.w3.org/2000/svg",h=8;a.initSVG=function(p,k,q){var j,o,i=!1;p&&p.querySelector?(o=p.querySelector("style"),null===o&&(i=!0)):(p=f.newEl("svg",d),i=!0),i&&(j=f.newEl("defs",d),o=f.newEl("style",d),f.setAttr(o,{type:"text/css"}),j.appendChild(o),p.appendChild(j)),p.webkitMatchesSelector&&p.setAttribute("xmlns",d);for(var m=0;m<p.childNodes.length;m++){p.childNodes[m].nodeType===h&&p.removeChild(p.childNodes[m])}for(;o.childNodes.length;){o.removeChild(o.childNodes[0])}return f.setAttr(p,{width:k,height:q,viewBox:"0 0 "+k+" "+q,preserveAspectRatio:"none"}),p},a.svgStringToDataURI=function(){var e="data:image/svg+xml;charset=UTF-8,",i="data:image/svg+xml;charset=UTF-8;base64,";return function(k,j){return j?i+btoa(g.unescape(encodeURIComponent(k))):e+encodeURIComponent(k)}}(),a.serializeSVG=function(v,j){if(g.XMLSerializer){var m=new XMLSerializer,e="",q=j.stylesheets;if(j.svgXMLStylesheet){for(var w=f.createXML(),k=q.length-1;k>=0;k--){var p=w.createProcessingInstruction("xml-stylesheet",'href="'+q[k]+'" rel="stylesheet"');w.insertBefore(p,w.firstChild)}w.removeChild(w.documentElement),e=m.serializeToString(w)}var r=m.serializeToString(v);return r=r.replace(/\&amp;(\#[0-9]{2,}\;)/g,"&$1"),e+r}}}).call(a,function(){return this}())},function(b,a){(function(c){a.newEl=function(d,e){if(c.document){return null==e?c.document.createElement(d):c.document.createElementNS(e,d)}},a.setAttr=function(f,d){for(var g in d){f.setAttribute(g,d[g])}},a.createXML=function(){if(c.DOMParser){return(new DOMParser).parseFromString("<xml />","application/xml")}},a.getNodeArray=function(d){var e=null;return"string"==typeof d?e=document.querySelectorAll(d):c.NodeList&&d instanceof c.NodeList?e=d:c.Node&&d instanceof c.Node?e=[d]:c.HTMLCollection&&d instanceof c.HTMLCollection?e=d:d instanceof Array?e=d:null===d&&(e=[]),e=Array.prototype.slice.call(e)}}).call(a,function(){return this}())},function(b,a){var c=function(f,d){"string"==typeof f&&(this.original=f,"#"===f.charAt(0)&&(f=f.slice(1)),/[^a-f0-9]+/i.test(f)||(3===f.length&&(f=f.replace(/./g,"$&$&")),6===f.length&&(this.alpha=1,d&&d.alpha&&(this.alpha=d.alpha),this.set(parseInt(f,16)))))};c.rgb2hex=function(g,d,h){function f(j){var i=(0|j).toString(16);return j<16&&(i="0"+i),i}return[g,d,h].map(f).join("")},c.hsl2rgb=function(p,u,g){var d=p/60,k=(1-Math.abs(2*g-1))*u,f=k*(1-Math.abs(parseInt(d)%2-1)),q=g-k/2,v=0,j=0,m=0;return d>=0&&d<1?(v=k,j=f):d>=1&&d<2?(v=f,j=k):d>=2&&d<3?(j=k,m=f):d>=3&&d<4?(j=f,m=k):d>=4&&d<5?(v=f,m=k):d>=5&&d<6&&(v=k,m=f),v+=q,j+=q,m+=q,v=parseInt(255*v),j=parseInt(255*j),m=parseInt(255*m),[v,j,m]},c.prototype.set=function(j){this.raw=j;var g=(16711680&this.raw)>>16,l=(65280&this.raw)>>8,h=255&this.raw,f=0.2126*g+0.7152*l+0.0722*h,k=-0.09991*g-0.33609*l+0.436*h,d=0.615*g-0.55861*l-0.05639*h;return this.rgb={r:g,g:l,b:h},this.yuv={y:f,u:k,v:d},this},c.prototype.lighten=function(k){var g=Math.min(1,Math.max(0,Math.abs(k)))*(k<0?-1:1),j=255*g|0,f=Math.min(255,Math.max(0,this.rgb.r+j)),l=Math.min(255,Math.max(0,this.rgb.g+j)),d=Math.min(255,Math.max(0,this.rgb.b+j)),h=c.rgb2hex(f,l,d);return new c(h)},c.prototype.toHex=function(d){return(d?"#":"")+this.raw.toString(16)},c.prototype.lighterThan=function(d){return d instanceof c||(d=new c(d)),this.yuv.y>d.yuv.y},c.prototype.blendAlpha=function(j){j instanceof c||(j=new c(j));var g=j,h=this,f=g.alpha*g.rgb.r+(1-g.alpha)*h.rgb.r,k=g.alpha*g.rgb.g+(1-g.alpha)*h.rgb.g,d=g.alpha*g.rgb.b+(1-g.alpha)*h.rgb.b;return new c(c.rgb2hex(f,k,d))},b.exports=c},function(b,a){b.exports={version:"2.9.4",svg_ns:"http://www.w3.org/2000/svg"}},function(m,w,f){function b(c,a){return p.element({tag:a,width:c.width,height:c.height,fill:c.properties.fill})}function j(a){return k.cssProps({fill:a.fill,"font-weight":a.font.weight,"font-family":a.font.family+", monospace","font-size":a.font.size+a.font.units})}function d(h,a,i){var c=i/2;return["M",c,c,"H",h-c,"V",a-c,"H",c,"V",0,"M",0,c,"L",h,a-c,"M",0,a-c,"L",h,c].join(" ")}var q=f(13),x=f(8),g=f(11),k=f(7),v=g.svg_ns,p={element:function(c){var a=c.tag,h=c.content||"";return delete c.tag,delete c.content,[a,h,c]}};m.exports=function(N,z){var G=z.engineSettings,I=G.stylesheets,K=I.map(function(h){return'<?xml-stylesheet rel="stylesheet" href="'+h+'"?>'}).join("\n"),O="holder_"+Number(new Date).toString(16),M=N.root,F=M.children.holderTextGroup,L="#"+O+" text { "+j(F.properties)+" } ";F.y+=0.8*F.textPositionData.boundingBox.height;var H=[];Object.keys(F.children).forEach(function(l){var h=F.children[l];Object.keys(h.children).forEach(function(A){var E=h.children[A],y=F.x+h.x+E.x,t=F.y+h.y+E.y,C=p.element({tag:"text",content:E.properties.text,x:y,y:t});H.push(C)})});var s=p.element({tag:"g",content:H}),i=null;if(M.children.holderBg.properties.outline){var r=M.children.holderBg.properties.outline;i=p.element({tag:"path",d:d(M.children.holderBg.width,M.children.holderBg.height,r.width),"stroke-width":r.width,stroke:r.fill,fill:"none"})}var P=b(M.children.holderBg,"rect"),o=[];o.push(P),r&&o.push(i),o.push(s);var c=p.element({tag:"g",id:O,content:o}),D=p.element({tag:"style",content:L,type:"text/css"}),B=p.element({tag:"defs",content:D}),u=p.element({tag:"svg",content:[B,c],width:M.properties.width,height:M.properties.height,xmlns:v,viewBox:[0,0,M.properties.width,M.properties.height].join(" "),preserveAspectRatio:"none"}),J=q(u);J=K+J[0];var a=x.svgStringToDataURI(J,"background"===z.mode);return a}},function(c,a,d){d(14);c.exports=function b(r,z,j){function m(s){var l=s.match(/^[\w-]+/),n={tag:l?l[0]:"div",attr:{},children:[]},h=s.match(/#([\w-]+)/),u=s.match(/\$([\w-]+)/),f=s.match(/\.[\w-]+/g);return h&&(n.attr.id=h[1],j[h[1]]=n),u&&(j[u[1]]=n),f&&(n.attr["class"]=f.join(" ").replace(/\./g,"")),s.match(/&$/g)&&(q=!1),n}function g(h,f){if(null!==f&&f!==!1&&void 0!==f){return"string"!=typeof f&&"object"!=typeof f?String(f):f}}function x(f){return f||0===f?String(f).replace(/&/g,"&amp;").replace(/"/g,"&quot;"):""}function A(f){return String(f).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var k,p,y,w,v=1,q=!0;if(j=j||{},"string"==typeof r[0]){r[0]=m(r[0])}else{if(!Array.isArray(r[0])){throw new Error("First element of array must be a string, or an array and not "+JSON.stringify(r[0]))}v=0}for(;v<r.length;v++){if(r[v]===!1||null===r[v]){r[0]=!1;break}if(void 0!==r[v]&&r[v]!==!0){if("string"==typeof r[v]){q&&(r[v]=A(r[v])),r[0].children.push(r[v])}else{if("number"==typeof r[v]){r[0].children.push(r[v])}else{if(Array.isArray(r[v])){if(Array.isArray(r[v][0])){if(r[v].reverse().forEach(function(e){r.splice(v+1,0,e)}),0!==v){continue}v++}b(r[v],z,j),r[v][0]&&r[0].children.push(r[v][0])}else{if("function"==typeof r[v]){y=r[v]}else{if("object"!=typeof r[v]){throw new TypeError('"'+r[v]+'" is not allowed as a value.')}for(p in r[v]){r[v].hasOwnProperty(p)&&null!==r[v][p]&&r[v][p]!==!1&&("style"===p&&"object"==typeof r[v][p]?r[0].attr[p]=JSON.stringify(r[v][p],g).slice(2,-2).replace(/","/g,";").replace(/":"/g,":").replace(/\\"/g,"'"):r[0].attr[p]=r[v][p])}}}}}}}if(r[0]!==!1){k="<"+r[0].tag;for(w in r[0].attr){r[0].attr.hasOwnProperty(w)&&(k+=" "+w+'="'+x(r[0].attr[w])+'"')}k+=">",r[0].children.forEach(function(f){k+=f}),k+="</"+r[0].tag+">",r[0]=k}return j[0]=r[0],y&&y(r[0]),j}},function(c,a){function d(k){var h=""+k,m=b.exec(h);if(!m){return h}var g,l="",f=0,j=0;for(f=m.index;f<h.length;f++){switch(h.charCodeAt(f)){case 34:g="&quot;";break;case 38:g="&amp;";break;case 39:g="&#39;";break;case 60:g="&lt;";break;case 62:g="&gt;";break;default:continue}j!==f&&(l+=h.substring(j,f)),j=f+1,l+=g}return j!==f?l+h.substring(j,f):l}var b=/["'&<>]/;c.exports=d},function(d,b,f){var c=f(9),a=f(7);d.exports=function(){var h=c.newEl("canvas"),g=null;return function(k){null==g&&(g=h.getContext("2d"));var e=a.canvasRatio(),j=k.root;h.width=e*j.properties.width,h.height=e*j.properties.height,g.textBaseline="middle";var B=j.children.holderBg,E=e*B.width,t=e*B.height,w=2,D=w/2;g.fillStyle=B.properties.fill,g.fillRect(0,0,E,t),B.properties.outline&&(g.strokeStyle=B.properties.outline.fill,g.lineWidth=B.properties.outline.width,g.moveTo(D,D),g.lineTo(E-D,D),g.lineTo(E-D,t-D),g.lineTo(D,t-D),g.lineTo(D,D),g.moveTo(0,D),g.lineTo(E,t-D),g.moveTo(0,t-D),g.lineTo(E,D),g.stroke());var A=j.children.holderTextGroup;g.font=A.properties.font.weight+" "+e*A.properties.font.size+A.properties.font.units+" "+A.properties.font.family+", monospace",g.fillStyle=A.properties.fill;for(var z in A.children){var y=A.children[z];for(var i in y.children){var x=y.children[i],q=e*(A.x+y.x+x.x),C=e*(A.y+y.y+x.y+A.properties.leading/2);g.fillText(x.properties.text,q,C)}}return h.toDataURL("image/png")}}()}])}),function(b,a){a&&(Holder=b.Holder)}(this,"undefined"!=typeof Meteor&&"undefined"!=typeof Package);